<template name="surveyViewTemplate">

	{{>surveyForm}}

	<div class="container-fluid">
		<div class="row-fluid">
			<a href="#newSurveyModal" role="button" data-toggle="modal" class="btn btn-large btn-primary addSurvey">Add Survey</a>
			<br/><br/>
			<table class="table table-bordered table-striped table-hover">
				<thead>
				<tr>
					<th>Survey Title</th>
					<th>Date created</th>
					<th>Date updated</th>
					<th>Edit</th>
				</tr>

				</thead>
				<tbody>
				{{#each surveyList}}
					{{>surveyRow}}
				{{/each}}
				</tbody>

			</table>
		</div>
	</div>
</template>

<template name="surveyRow">
	<tr class="surveyRow">
		<td><a href="{{editSurveyPath _id}}">{{title}}</a></td>
		<td>{{formatDate createdAt}}</td>
		<td>{{formatDate updatedAt}}</td>
		<td><a href="#newSurveyModal" role="button" data-toggle="modal" name="edit" class="btn btn-info edit"><i class="fa fa-edit"></i></a></td>
	</tr>
</template>

<template name="surveyForm">
	<div id="newSurveyModal" class="modal fade" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
					<h3 class="showWhenNew">Add Survey</h3>
					<h3 class="showWhenEdit">Update Survey</h3>
				</div>
				<div class="modal-body">

					<label for="survey_title">Survey Title: </label>
					<input type="text" class="input input-xlarge survey_title" name="survey_title" id="survey_title"><br />

					<label class="checkbox-inline">
						<input type="checkbox" class="active" id="active" value="active"> Active
					</label><br />
					<label class="checkbox-inline">
						<input type="checkbox"  class="skip" id="skip" value="skip"> Skip
					</label><br />
					<label class="checkbox-inline">
						<input type="checkbox" class="copy" id="copy" value="copy"> Copy
					</label><br />

					<input type="hidden" id="isUpdate" value="0" />
					<input type="hidden" id="surveyID" value="" />
				</div>
				<div class="modal-footer">
					<a href="#" class="btn btn-danger remove showWhenEdit" data-dismiss="modal">Delete</a>
					<a href="#" class="btn btn-warning save showWhenEdit" data-dismiss="modal">Update</a>
					<a href="#" class="btn btn-primary save showWhenNew" data-dismiss="modal">Save</a>
					<a href="#" class="btn btn-default cancel" data-dismiss="modal">Cancel</a>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="surveyEditTemplate">
	<!--This is default template. Might be useful later on.-->
	<!--<div class="box box-default">-->
		<!--<div class="box-body">-->
			<!--{{#if admin_current_doc}}-->
			<!--{{> quickForm id="admin_update" collection=admin_collection doc=admin_current_doc fields=admin_fields omitFields=admin_omit_fields buttonContent='Update'}}-->
			<!--{{/if}}-->
		<!--</div>-->
	<!--</div>-->

	<div class="container-fluid">
		<div class="row-fluid">
			<div class="page-header">
				<h4>Setup</h4>
			</div>

			<div class="form-group">
				<label for="survey_title1" id ="survey_title1" name ="survey_title" value={{title}}>
					<b>Survey Title:</b> {{title}}
				</label>
			</div>

			<div class="surveySection">
				<label for="sectionName">Section

					<input type="text" class="form-control input input-xxlarge sectionName" id="sectionName" name="sectionName" placeholder="Section Name" value="" />

					<button class="btn btn-medium btn-info addSection">Add Section</button>

				</label>
			</div>
			<br/>
			<div class="surveyLabel">
				<label for="labelName">Label
					<input type="text" class="form-control input input-xxlarge labelName" id="labelName" name="labelName" placeholder="Label" value="" />

					<button class="btn btn-medium btn-info addLabel">Add Label</button>
				</label>
			</div>

			<br/>
			<div class="addQuesButton">
				<a href="{{pathFor route='selectSurveyQuestion'}}" class="btn btn-medium btn-info addQues">Add Questions</a>
			</div>
		</div>
	</div>
	<br/>

	{{> typeDefinition}}

</template>

<template name="typeDefinition">
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="row">

				<div class="list-pair col-sm-12">

					<div class="sortable target" id="object">
						{{#sortable items=attributes animation="100" handle=".sortable-handle" ghostClass="sortable-ghost" options=attributesOptions}}
						{{> sortableItemTarget}}
						{{/sortable}}
					</div>
				</div>

			</div>
			{{#if showPreview}}
			<a href="{{pathFor route='previewSurvey' data = getPost}}" class="btn btn-medium btn-info previewSurvey">Preview</a>
			{{/if}}
		</div>
	</div>
</template>

<template name="sortableItemTarget">
	<div class="container-fluid">
		<div class="row-fluid">
			<div data-id="{{order}}" class="sortable-item removable well well-sm">
				{{{icon}}}
				<i class="sortable-handle mdi-action-view-headline pull-right">Reorder</i>
				{{#if notQuestion contentType}}
					<span class="name">{{content}}</span>
				{{else}}
					<span class="name">{{quesNames content}}</span>
				{{/if}}
				<span class="badge">{{order}}</span>
				<button type="button" class="close" data-dismiss="alert">
					<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
				</button>
			</div>
		</div>
	</div>
</template>

